(function(){function e(e,t,n=!1){return e[`querySelector${n?`All`:``}`](t)}function t(t,n=document){return e(n,t)}function n(t,n=document){return e(n,t,!0)}function r(e){return window[`${e?`local`:`session`}Storage`]}function i(e,t,n){let i=r(t);return[()=>{let t=i.getItem(e),r=n==null?null:n;if(t===null)return r;try{return JSON.parse(t)}catch(e){return r}},t=>{t===null?i.removeItem(e):i.setItem(e,JSON.stringify(t))}]}function a(e,t){return i(e,!1,t)}function o(e,t){return i(e,!0,t)}function s(e){return Array.isArray(e)}function c(...e){let t,n,r,i;typeof e[0]==`string`||s(e[0])?([n,r,i]=e,t=window):[t,n,r,i]=e;let a=s(n)?n:[n],o=s(r)?r:[r],c=[];for(let e of a)for(let n of o)t.addEventListener(e,n,i),c.push(()=>t.removeEventListener(e,n,i));return()=>{for(let e of c)e()}}function l(e){return window.location[e]}function u(){let e=t(`#back-anchor`),[n,r]=a(`prev-path`),i=n(),o=l(`pathname`);if(!e||i===o){r(``);return}if(!i){r(o);return}c(e,`click`,e=>{e.preventDefault(),window.history.back()})}let[d,f]=o(`theme`,`light`);function p(){return`startViewTransition`in document&&typeof document.startViewTransition==`function`}function m(e,n=!1,r,i){let a=e===`dark`;n&&p()&&r!==void 0&&i!==void 0?document.startViewTransition(()=>{document.documentElement.classList.toggle(`dark`,a)}).ready.then(()=>{let e=Math.hypot(Math.max(r,innerWidth-r),Math.max(i,innerHeight-i)),t=[`circle(0% at ${r}px ${i}px)`,`circle(${e}px at ${r}px ${i}px)`];document.documentElement.animate({clipPath:a?t.reverse():t},{duration:350,pseudoElement:a?`::view-transition-old(root)`:`::view-transition-new(root)`,easing:`ease-in-out`,fill:`both`})}):document.documentElement.classList.toggle(`dark`,a);let o=t(`#theme-switcher`);o&&(o.classList.toggle(`i-moon-fill`,!a),o.classList.toggle(`i-sun-fill`,a)),f(e),window.dispatchEvent(new CustomEvent(`theme-change`,{detail:{theme:e}}))}function h(){m(d()===`dark`?`dark`:`light`)}function g(){let e=t(`#theme-switcher`);e&&c(e,`click`,e=>{m(d()===`dark`?`light`:`dark`,!0,e.clientX,e.clientY)})}function _(e,t,...n){return e[`${t}Attribute`](...n)}function v(e,t){return _(e,`get`,t)}function y(e,t,n){_(e,`set`,t,n)}function b(e,t){return v(e,`data-${t}`)}function x(e,t,n){y(e,`data-${t}`,n==null?``:n)}let S=()=>{},C={guessImgSize:e=>{let t=b(e,`src`)||``,n=512,r=384,i=[...t.matchAll(/(\d{2,4})x(\d{2,4})/g)],a=i[i.length-1];return a&&(n=Number(a[1])||512,r=Number(a[2])||384),{width:n,height:r}}};function w(){return C}function T(e){Object.assign(C,e)}window.setMoriConfig=T,window.getMoriConfig=w;function E(e,t){return`data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 ${e} ${t}%27%3E%3C/svg%3E`}let D=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let t=e.target;O(t),D.unobserve(t)}})},{rootMargin:`85px 0px`});function O(e){let t=b(e,`src`);if(!t)return;x(e,`status`,`loading`);let n=e.title;e.title=`Loading...`,e.src=t;let r=()=>{x(e,`status`,`loaded`),x(e,`solved`),e.title=n},i=S,a=S;i=c(e,`error`,()=>{i(),a(),x(e,`status`,`error`),x(e,`solved`),e.title=`Load failed`,e.src=E(Number(b(e,`guess-width`)||v(e,`width`))||512,Number(b(e,`guess-height`)||v(e,`height`))||384)}),e.complete?r():a=c(e,`load`,()=>{r(),a()})}function k(){n(`img.lazy-img:not([data-solved])`).forEach(e=>{if(!b(e,`src`))return;let t=v(e,`width`),n=v(e,`height`);if(!t||!n){let r=w().guessImgSize(e);t=r.width,n=r.height,x(e,`guess-width`,`${t}`),x(e,`guess-height`,`${n}`)}e.src=E(Number(t),Number(n)),D.observe(e)})}c(`DOMContentLoaded`,()=>{u(),h(),g(),k()})})();