(function(){function e(e,t,n=!1){return e[`querySelector${n?`All`:``}`](t)}function t(t,n=document){return e(n,t)}function n(t,n=document){return e(n,t,!0)}function r(e){return window[`${e?`local`:`session`}Storage`]}function i(e,t,n){let i=r(t);return[()=>{let t=i.getItem(e),r=n==null?null:n;if(t===null)return r;try{return JSON.parse(t)}catch(e){return r}},t=>{t===null?i.removeItem(e):i.setItem(e,JSON.stringify(t))}]}function a(e,t){return i(e,!1,t)}function o(e,t){return i(e,!0,t)}function s(e){return Array.isArray(e)}function c(...e){let t,n,r,i;typeof e[0]==`string`||s(e[0])?([n,r,i]=e,t=window):[t,n,r,i]=e;let a=s(n)?n:[n],o=s(r)?r:[r],c=[];for(let e of a)for(let n of o)t.addEventListener(e,n,i),c.push(()=>t.removeEventListener(e,n,i));return()=>{for(let e of c)e()}}function l(e){return window.location[e]}function u(){let e=t(`#back-anchor`),[n,r]=a(`prev-path`),i=n(),o=l(`pathname`);if(!e||i===o){r(``);return}if(!i){r(o);return}c(e,`click`,e=>{e.preventDefault(),window.history.back()})}function d(e,t,n){let r,i;typeof e==`string`?(r=window,i=e,n=t):(r=e,i=t);let a=new CustomEvent(i,{detail:n,bubbles:!0,cancelable:!0});r.dispatchEvent(a)}let[f,p]=o(`theme`,`light`);function m(){return`startViewTransition`in document&&typeof document.startViewTransition==`function`}function h(e,n=!1,r,i){let a=e===`dark`;n&&m()&&r!==void 0&&i!==void 0?document.startViewTransition(()=>{document.documentElement.classList.toggle(`dark`,a)}).ready.then(()=>{let e=Math.hypot(Math.max(r,innerWidth-r),Math.max(i,innerHeight-i)),t=[`circle(0% at ${r}px ${i}px)`,`circle(${e}px at ${r}px ${i}px)`];document.documentElement.animate({clipPath:a?t.reverse():t},{duration:350,pseudoElement:a?`::view-transition-old(root)`:`::view-transition-new(root)`,easing:`ease-in-out`,fill:`both`})}):document.documentElement.classList.toggle(`dark`,a);let o=t(`#theme-switcher`);o&&(o.classList.toggle(`i-moon-fill`,!a),o.classList.toggle(`i-sun-fill`,a)),p(e),_(e)}function g(){h(v())}function _(e){d(`theme-change`,{theme:e})}function v(){return f()===`dark`?`dark`:`light`}function y(){_(v());let e=t(`#theme-switcher`);e&&c(e,`click`,e=>{h(f()===`dark`?`light`:`dark`,!0,e.clientX,e.clientY)})}function b(e,t,...n){return e[`${t}Attribute`](...n)}function x(e,t){return b(e,`get`,t)}function S(e,t,n){b(e,`set`,t,n)}function C(e,t){return x(e,`data-${t}`)}function w(e,t,n){S(e,`data-${t}`,n==null?``:n)}let T=()=>{},E={guessImgSize:e=>{let t=C(e,`src`)||``,n=512,r=384,i=[...t.matchAll(/(\d{2,4})x(\d{2,4})/g)],a=i[i.length-1];return a&&(n=Number(a[1])||512,r=Number(a[2])||384),{width:n,height:r}}};function D(){return E}function O(e){Object.assign(E,e)}window.setMoriConfig=O,window.getMoriConfig=D;function k(e,t){return`data:image/svg+xml,%3Csvg xmlns=%27http://www.w3.org/2000/svg%27 viewBox=%270 0 ${e} ${t}%27%3E%3C/svg%3E`}let A=new IntersectionObserver(e=>{e.forEach(e=>{if(e.isIntersecting){let t=e.target;j(t),A.unobserve(t)}})},{rootMargin:`85px 0px`});function j(e){let t=C(e,`src`);if(!t)return;w(e,`status`,`loading`);let n=e.title;e.title=`Loading...`,e.src=t;let r=()=>{w(e,`status`,`loaded`),w(e,`solved`),e.title=n},i=T,a=T;i=c(e,`error`,()=>{i(),a(),w(e,`status`,`error`),w(e,`solved`),e.title=`Load failed`,e.src=k(Number(C(e,`guess-width`)||x(e,`width`))||512,Number(C(e,`guess-height`)||x(e,`height`))||384)}),e.complete?r():a=c(e,`load`,()=>{r(),a()})}function M(){n(`img.lazy-img:not([data-solved])`).forEach(e=>{if(!C(e,`src`))return;let t=x(e,`width`),n=x(e,`height`);if(!t||!n){let r=D().guessImgSize(e);t=r.width,n=r.height,w(e,`guess-width`,`${t}`),w(e,`guess-height`,`${n}`)}e.src=k(Number(t),Number(n)),A.observe(e)})}g(),c(`DOMContentLoaded`,()=>{u(),y(),M()})})();