{{ define "main" }}
  {{- $authors := partial "get-authors.html" . }}

  <article>
    <header class="article-header">
      <h1>{{ .Title }}</h1>
      <div class="article-meta">
        {{- if gt (len $authors) 0 }}
          <span class="article-authors">
            {{- range $index, $author := $authors -}}
              {{- if $author.website }}
                <a href="{{ $author.website }}" class="article-author" target="_blank" rel="noopener noreferrer">{{ $author.name }}</a>
              {{- else }}
                <span class="article-author">{{ $author.name }}</span>
              {{- end }}
              {{- if lt (add $index 1) (len $authors) }}<span class="article-separator">,</span>{{ end }}
            {{- end }}
          </span>
          <span class="article-separator">·</span>
        {{- end }}

        <time class="article-date" datetime="{{ .Date.Format "2006-01-02T15:04:05Z07:00" }}">
          {{ .Date.Format "Jan 2, 2006" }}
        </time>
        {{- if ne (.Date.Format "2006-01-02") (.Lastmod.Format "2006-01-02") }}
          <span class="article-separator">·</span>
          <time class="article-lastmod" datetime="{{ .Lastmod.Format "2006-01-02T15:04:05Z07:00" }}">
            Updated {{ .Lastmod.Format "Jan 2, 2006" }}
          </time>
        {{- end }}
      </div>
    </header>

    <div class="article-content">
      {{ .Content }}
    </div>

    {{ with .Params.tags }}
      <div class="article-tags">
        {{ range . }}
          <a href="{{ "tags" | relURL }}/{{ . | urlize }}/" class="tag">#{{ . }}</a>
        {{ end }}
      </div>
    {{ end }}
  </article>

  {{ if templates.Exists "_partials/after-article.html" }}
    {{ partialCached "after-article.html" . }}
  {{ end }}
{{ end }}
