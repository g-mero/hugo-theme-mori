{{/*
  Partial: links-list
  Display links with grouping and sorting support

  Parameters:
    - groups: Array of link groups to display
    - limit: Maximum number of links to show (0 = no limit)
    - showGroupName: Whether to show group names (default: true)
*/}}

{{ $groups := .groups }}
{{ $limit := default 0 .limit }}
{{ $showGroupName := default true .showGroupName }}

{{/* Collect all items from all groups */}}
{{ $allItems := slice }}
{{ range $groups }}
  {{ $sortedItems := sort .items "weight" "asc" }}
  {{ range $sortedItems }}
    {{ $allItems = $allItems | append . }}
  {{ end }}
{{ end }}

{{/* Apply limit if specified */}}
{{ if gt $limit 0 }}
  {{ $allItems = first $limit $allItems }}
{{ end }}

{{/* Render single list */}}
<ul class="list-none p-0 m-0 grid grid-cols-1 sm:grid-cols-2 gap-sm md:gap-xs gap-y-md md:gap-y-sm items-stretch">
  {{ range $allItems }}
    <li class="m-0 flex">
      <a class="flex flex-col flex-1 p-xs md:p-sm border b-solid border-bd1 rounded-sm c-fg2 no-underline transition-all hover:border-fg2" href="{{ .url }}" target="_blank" rel="noopener noreferrer">
        <span class="block font-500 mb-xs overflow-hidden text-ellipsis whitespace-nowrap">{{ partial "get-localized.html" (dict "data" . "field" "name") }}</span>
        {{ $description := partial "get-localized.html" (dict "data" . "field" "description") }}
        {{ with $description }}
          <span class="block fs-sm c-fg3 overflow-hidden text-ellipsis lh-tight line-clamp-2">{{ . }}</span>
        {{ end }}
      </a>
    </li>
  {{ end }}
</ul>

